{% extends "base.html" %}

{% block title %}{{ about.name }} – Portfolio{% endblock %}

{% block content %}
<!-- Hero Section -->
<header id="hero" class="py-12 bg-white/30">
    <div class="bg-black bg-opacity-50 p-10 rounded flex flex-col md:flex-row items-center gap-4 mx-auto">
        <!-- Profilbild -->
        <div class="flex-shrink-0">
            <img src="{{ about.profile_image }}" alt="Profilbild von {{ about.name }}"
                class="rounded-full w-32 h-32 md:w-48 md:h-48 object-cover">
        </div>
        <!-- Textbereich -->
        <div class="text-center md:text-left">
            <h1 class="text-3xl md:text-4xl font-bold mb-2 text-gray">{{ about.greeting }}</h1>
            <p class="text-xl mb-2 text-gray">{{ about.role }}</p>
            <blockquote class="text-lg text-gray md:text-xl italic font-light border-l-4 pl-4 border-accent">
                {{ about.bio }}
            </blockquote>
        </div>
    </div>
</header>

<!-- Projekte Section -->
<section id="projects" class="py-12 bg-white/80">
    <div class="container mx-auto px-4">
        <h2
            class="text-4xl font-extrabold uppercase tracking-wider bg-gradient-to-l from-primary to-accent bg-clip-text text-transparent text-center mb-12 relative">
            Meine Projekte
            <span class="absolute left-1/2 bottom-[-10px] w-16 h-1 bg-accent transform -translate-x-1/2"></span>
        </h2>
        <!-- Alpine.js Container mit x-data -->
        <div x-data="{ openTile: null }" class="relative">
            <!-- Grid mit den Projekt-Kacheln -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                {% for project in projects %}
                <div class="project-tile bg-white rounded-lg shadow-lg overflow-hidden transform transition hover:scale-105 cursor-pointer"
                    @click="openTile = (openTile === {{ loop.index }} ? null : {{ loop.index }})">
                    <div class="p-6">
                        <img src="{{ project.logo or url_for('static', filename='images/default-logo.png') }}"
                            alt="Logo von {{ project.title }}"
                            class="w-auto max-w-full h-12 object-contain mx-auto mb-4">
                        <h3 class="text-xl font-bold mb-2 text-primary">{{ project.title }}</h3>
                        <!-- Immer die Kurzbeschreibung anzeigen -->
                        <p class="mb-4 min-h-[72px]">{{ project.shortDescription }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Modal-Overlay: Wird angezeigt, wenn openTile nicht null ist -->
            <div x-show="openTile !== null" x-cloak x-transition.opacity.duration.300ms
                class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
                @click="openTile = null">
                <!-- Modal-Inhalt mit maximaler Höhe und Scrollbarkeit -->
                <div class="bg-white p-6 rounded-lg max-w-3xl w-full relative max-h-[90vh] overflow-y-auto">
                    {% for project in projects %}
                    <div x-show="openTile === {{ loop.index }}" x-transition.duration.300ms>
                        <img src="{{ project.logo or url_for('static', filename='images/default-logo.png') }}"
                            alt="Logo von {{ project.title }}"
                            class="w-auto max-w-full h-12 object-contain mx-auto mb-4">
                        <h3 class="text-2xl font-bold mb-4 text-primary">{{ project.title }}</h3>
                        <!-- Detaillierte Inhalte -->
                        <div class="mb-4">
                            <strong>ROLLE:</strong>
                            <p>{{ project.rolle }}</p>
                        </div>
                        <div class="mb-4">
                            <strong>BESCHREIBUNG:</strong>
                            <p>{{ project.description }}</p>
                        </div>
                        <div class="mb-4">
                            <strong>AUFGABEN:</strong>
                            <ul class="list-disc list-inside">
                                {% for aufgabe in project.aufgaben %}
                                <li>{{ aufgabe }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="mb-4">
                            <strong>TECHNOLOGIEN:</strong>
                            <p>{{ project.technologien }}</p>
                        </div>
                        {% if project.link %}
                        <a href="{{ project.link }}" target="_blank"
                            class="inline-block mt-4 bg-primary text-white py-2 px-4 rounded hover:bg-opacity-90">
                            Zur Website</a>
                        {% endif %}
                    </div>
                    {% endfor %}
                    <!-- Schließen-Button -->
                    <button class="absolute top-2 right-2 text-2xl leading-none z-50"
                        @click="openTile = null">&times;</button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- GitHub Projekte Section -->
<section id="github-projects" class="py-12 bg-white/30">
    <div class="container mx-auto px-4">
        <h2
            class="text-4xl font-extrabold uppercase tracking-wider bg-gradient-to-l from-primary to-accent bg-clip-text text-transparent text-center mb-12 relative">
            Meine GitHub-Projekte
            <span class="absolute left-1/2 bottom-[-10px] w-16 h-1 bg-accent transform -translate-x-1/2"></span>
        </h2>
        <!-- Grid mit den GitHub-Projekt-Kacheln -->
        <div x-data="{ openGitTile: null }" class="relative">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                {% for project in github_projects %}
                <div class="project-tile bg-white rounded-lg shadow-lg overflow-hidden transform transition hover:scale-105 cursor-pointer"
                    @click="openGitTile = (openGitTile === {{ loop.index }} ? null : {{ loop.index }})">
                    <div class="p-6">
                        <img src="{{ project.logo or url_for('static', filename='images/default-logo.png') }}"
                            alt="Logo von {{ project.title }}"
                            class="w-auto max-w-full h-24 object-contain mx-auto mb-4">
                        <h3 class="text-xl font-bold mb-2 text-primary">{{ project.title }}</h3>
                        <p class="mb-4 min-h-[72px]">{{ project.shortDescription }}</p>
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Modal-Overlay: Wird angezeigt, wenn openGitTile nicht null ist -->
            <div x-show="openGitTile !== null" x-cloak x-transition.opacity.duration.300ms
                class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
                @click="openGitTile = null">
                <!-- Modal-Inhalt (Klicks innerhalb des Modals sollen nicht zum Schließen führen) -->
                <div class="bg-white p-6 rounded-lg max-w-3xl w-full relative max-h-[90vh] overflow-y-auto">
                    {% for project in github_projects %}
                    <div x-show="openGitTile === {{ loop.index }}" x-transition.duration.300ms>
                        <img src="{{ project.logo or url_for('static', filename='images/default-logo.png') }}"
                            alt="Logo von {{ project.title }}"
                            class="w-auto max-w-full h-24 object-contain mx-auto mb-4">
                        <h3 class="text-2xl font-bold mb-4 text-primary">{{ project.title }}</h3>
                        <div class="mb-4">
                            <strong>Technologien:</strong>
                            <p>{{ project.technologien }}</p>
                        </div>
                        <div class="mb-4">
                            <strong>Kurzbeschreibung:</strong>
                            <p>{{ project.shortDescription }}</p>
                        </div>
                        <div class="mb-4">
                            <strong>Beschreibung:</strong>
                            <p>{{ project.description }}</p>
                        </div>
                        {% if project.link %}
                        <a href="{{ project.link }}" target="_blank"
                            class="inline-block mt-4 bg-accent text-white py-2 px-4 rounded hover:bg-opacity-90">
                            Code ansehen
                        </a>
                        {% endif %}
                    </div>
                    {% endfor %}
                    <!-- Schließen-Button -->
                    <button class="absolute top-2 right-2 text-2xl leading-none"
                        @click="openGitTile = null">&times;</button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Skills Section -->
<section id="skills" class="py-12 bg-white/80">
    <div class="container mx-auto px-4" x-data="{ openSkill: null }">
        <h2
            class="text-4xl font-extrabold uppercase tracking-wider bg-gradient-to-l from-primary to-accent bg-clip-text text-transparent text-center mb-12 relative">
            Meine Skills
            <span class="absolute left-1/2 bottom-[-10px] w-16 h-1 bg-accent transform -translate-x-1/2"></span>
        </h2>
        <div class="grid grid-cols-4 md:grid-cols-8 lg:grid-cols-6 gap-4 text-center">
            {% for skill in skills %}
            <div class="bg-white rounded-lg shadow-lg p-4 flex flex-col items-center transform transition hover:scale-105 cursor-pointer"
                @click="openSkill = (openSkill === {{ loop.index }} ? null : {{ loop.index }})">
                {% if skill.icon.startswith("static") %}
                <img src="{{ url_for('static', filename=skill.icon.replace('static/', '')) }}"
                    alt="{{ skill.name }} Icon" class="w-10 h-10 md:w-16 md:h-16 mb-2 object-contain">
                {% else %}
                <i class="{{ skill.icon }} text-3xl md:text-6xl mb-2 text-accent"></i>
                {% endif %}
                <!-- Dieser Block wird nur oberhalb von 1025px angezeigt -->
                <div class="skill-text">
                    <h3 class="text-lg font-bold text-primary">{{ skill.name }}</h3>
                    <p class="text-xs text-neutral mt-1">{{ skill.level }}</p>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Modal-Overlay für Skill-Details -->
        <div x-show="openSkill !== null" x-cloak x-transition.opacity.duration.300ms
            class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
            @click="openSkill = null">
            <div class="bg-white p-6 rounded-lg max-w-md w-full relative">
                {% for skill in skills %}
                <div x-show="openSkill === {{ loop.index }}" x-transition.duration.300ms>
                    {% if skill.icon.startswith("static") %}
                    <img src="{{ url_for('static', filename=skill.icon.replace('static/', '')) }}"
                        alt="{{ skill.name }} Icon" class="w-16 h-16 mx-auto mb-4 object-contain">
                    {% else %}
                    <i class="{{ skill.icon }} text-6xl mx-auto mb-4 text-accent"></i>
                    {% endif %}
                    <h3 class="text-2xl font-bold text-primary text-center">{{ skill.name }}</h3>
                    <p class="text-center text-neutral mt-1">Level: {{ skill.level }}</p>
                    <!-- Erweiterte Informationen -->
                    <div class="mt-4 text-center">
                        <p class="text-sm text-gray-600">{{ skill.info }}</p>
                        {% if skill.description %}
                        <div class="mt-2">
                            <strong>Beschreibung:</strong>
                            <p class="text-sm text-gray-600">{{ skill.description }}</p>
                        </div>
                        {% endif %}
                        {% if skill.link %}
                        <div class="mt-2">
                            <a href="{{ skill.link }}" target="_blank"
                                class="inline-block bg-primary text-white py-1 px-3 rounded hover:bg-opacity-90">
                                Mehr erfahren
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
                <!-- Schließen-Button -->
                <button class="absolute top-2 right-2 text-2xl leading-none" @click="openSkill = null">&times;</button>
            </div>
        </div>
    </div>
</section>

<!-- Kontakt Section -->
<section id="contact" class="py-12">
    <div class="container mx-auto px-4 text-center">
        <h2
            class="text-4xl font-extrabold uppercase tracking-wider bg-gradient-to-l from-primary to-accent bg-clip-text text-transparent text-center mb-5 relative">
            Kontakt
        </h2>
        <div class="flex justify-center space-x-6">
            <a href="mailto:{{ contact.email }}"
                class="flex flex-col items-center space-y-2 text-accent hover:text-primary">
                <span class="material-symbols-outlined" style="font-size: 42px;">mail</span>
            </a>
            <a href="{{ contact.linkedin }}" target="_blank"
                class="flex flex-col items-center space-y-2 text-accent hover:text-primary">
                <i class="devicon-linkedin-plain text-4xl"></i>
            </a>
            <a href="{{ contact.github }}" target="_blank"
                class="flex flex-col items-center space-y-2 text-accent hover:text-primary">
                <i class="devicon-github-original text-4xl"></i>
            </a>
        </div>
    </div>
</section>
{% endblock %}