{# Projects Management Tab #}
<div x-data="{
    activeProjectTab: 'portfolio',
    showPortfolioForm: false,
    showGithubForm: false,
    editingPortfolioId: null,
    editingGithubId: null
}">
    <!-- Header -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
        <div class="flex justify-between items-center flex-wrap gap-4">
            <div>
                <h2 class="text-2xl font-bold text-gray-800">üìÅ Projekte verwalten</h2>
                <p class="text-gray-600">Verwalten Sie Ihre Portfolio- und GitHub-Projekte</p>
            </div>
            <div class="flex gap-3">
                <a href="{{ url_for('admin.export_data', data_type='projects') }}" download
                    class="px-6 py-3 bg-gradient-to-r from-primary to-accent text-white rounded-lg hover:shadow-lg transition-all font-semibold flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                    Exportieren
                </a>
            </div>
        </div>
    </div>

    <!-- Project Type Tabs -->
    <div class="bg-white rounded-xl shadow-lg mb-6">
        <div class="border-b border-gray-200">
            <nav class="flex -mb-px">
                <button @click="activeProjectTab = 'portfolio'"
                    :class="activeProjectTab === 'portfolio' ? 'border-primary text-primary' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                    class="w-1/2 py-4 px-6 text-center border-b-2 font-medium transition-all">
                    üìÇ Portfolio-Projekte
                </button>
                <button @click="activeProjectTab = 'github'"
                    :class="activeProjectTab === 'github' ? 'border-accent text-accent' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                    class="w-1/2 py-4 px-6 text-center border-b-2 font-medium transition-all">
                    üêô GitHub-Projekte
                </button>
            </nav>
        </div>

        <!-- Portfolio Projects Tab -->
        <div x-show="activeProjectTab === 'portfolio'" class="p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800">Portfolio-Projekte</h3>
                <div class="flex gap-2">
                    <!-- Import Button -->
                    <label for="import-portfolio"
                        class="cursor-pointer px-4 py-2 bg-gradient-to-r from-success to-green-500 text-white rounded-lg hover:shadow-lg transition-all font-semibold flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                        </svg>
                        Importieren
                    </label>
                    <form id="import-portfolio-form" method="POST" action="{{ url_for('admin.import_projects') }}"
                        enctype="multipart/form-data" style="display: none;">
                        <input type="file" id="import-portfolio" name="file" accept=".json"
                            onchange="this.form.submit()">
                    </form>
                    <!-- Add Button -->
                    <button @click="showPortfolioForm = !showPortfolioForm; editingPortfolioId = null"
                        class="px-4 py-2 bg-gradient-to-r from-primary to-blue-500 text-white rounded-lg hover:shadow-lg transition-all font-semibold flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                        </svg>
                        Projekt hinzuf√ºgen
                    </button>
                </div>
            </div>

            <!-- Add Portfolio Project Form -->
            <div x-show="showPortfolioForm && editingPortfolioId === null"
                class="bg-gradient-to-r from-primary/5 to-blue-50 rounded-xl p-6 border-l-4 border-primary mb-6">
                <h4 class="text-lg font-bold text-gray-800 mb-4">Neues Projekt hinzuf√ºgen</h4>
                <form method="POST" action="{{ url_for('admin.add_portfolio_project') }}">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Titel *</label>
                            <input type="text" name="title" required
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Rolle</label>
                            <input type="text" name="rolle"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Kurzbeschreibung *</label>
                        <textarea name="shortDescription" required rows="2"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"></textarea>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Beschreibung *</label>
                        <textarea name="description" required rows="4"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"></textarea>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Aufgaben (eine pro Zeile)</label>
                        <textarea name="aufgaben" rows="3" placeholder="Aufgabe 1&#10;Aufgabe 2&#10;Aufgabe 3"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"></textarea>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Technologien</label>
                            <input type="text" name="technologien" placeholder="Javascript, C#, React"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Types</label>
                            <input type="text" name="types" placeholder="dynamics,software"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Von (MM/YYYY)</label>
                            <input type="text" name="von" placeholder="01/2024"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Bis (MM/YYYY)</label>
                            <input type="text" name="bis" placeholder="12/2025"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Logo Pfad</label>
                            <input type="text" name="logo" placeholder="./static/images/logo.png"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Link</label>
                        <input type="url" name="link" placeholder="https://..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>

                    <div class="flex gap-3">
                        <button type="submit"
                            class="px-6 py-3 bg-gradient-to-r from-primary to-blue-500 text-white rounded-lg hover:shadow-lg transition-all font-semibold">
                            Hinzuf√ºgen
                        </button>
                        <button type="button" @click="showPortfolioForm = false"
                            class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-all font-semibold">
                            Abbrechen
                        </button>
                    </div>
                </form>
            </div>

            <!-- Portfolio Projects List -->
            <div class="space-y-4">
                {% if portfolio_projects %}
                {% for project in portfolio_projects %}
                <!-- Edit Form f√ºr dieses Portfolio-Projekt -->
                <div x-show="editingPortfolioId === {{ loop.index0 }}" id="edit-portfolio-{{ loop.index0 }}"
                    class="bg-gradient-to-r from-primary/5 to-blue-50 rounded-xl p-6 border-l-4 border-primary mb-6">
                    <h4 class="text-lg font-bold text-gray-800 mb-4">Projekt bearbeiten</h4>
                    <form method="POST" action="{{ url_for('admin.edit_portfolio_project', project_id=loop.index0) }}">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Titel *</label>
                                <input type="text" name="title" required value="{{ project.title }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Rolle</label>
                                <input type="text" name="rolle" value="{{ project.rolle or '' }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Kurzbeschreibung *</label>
                            <textarea name="shortDescription" required rows="2"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{{ project.shortDescription }}</textarea>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Beschreibung *</label>
                            <textarea name="description" required rows="4"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{{ project.description }}</textarea>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Aufgaben (eine pro
                                Zeile)</label>
                            <textarea name="aufgaben" rows="3" placeholder="Aufgabe 1&#10;Aufgabe 2&#10;Aufgabe 3"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{% if project.aufgaben %}{{ project.aufgaben|join('\n') }}{% endif %}</textarea>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Technologien</label>
                                <input type="text" name="technologien" placeholder="Javascript, C#, React"
                                    value="{{ project.technologien or '' }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Types</label>
                                <input type="text" name="types" placeholder="dynamics,software"
                                    value="{{ project.types or '' }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Von (MM/YYYY)</label>
                                <input type="text" name="von" placeholder="01/2024" value="{{ project.von or '' }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Bis (MM/YYYY)</label>
                                <input type="text" name="bis" placeholder="12/2025" value="{{ project.bis or '' }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Logo Pfad</label>
                                <input type="text" name="logo" placeholder="./static/images/logo.png"
                                    value="{{ project.logo or '' }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Link</label>
                            <input type="url" name="link" placeholder="https://..." value="{{ project.link or '' }}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>

                        <div class="flex gap-3">
                            <button type="submit"
                                class="px-6 py-3 bg-gradient-to-r from-primary to-blue-500 text-white rounded-lg hover:shadow-lg transition-all font-semibold">
                                Speichern
                            </button>
                            <button type="button" @click="editingPortfolioId = null"
                                class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-all font-semibold">
                                Abbrechen
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Projekt-Vorschau -->
                <div x-show="editingPortfolioId !== {{ loop.index0 }}"
                    class="bg-white border-2 border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all">
                    <div class="flex justify-between items-start gap-4">
                        <div class="flex-1">
                            <h4 class="text-lg font-bold text-gray-800 mb-2">{{ project.title }}</h4>
                            {% if project.rolle %}
                            <p class="text-sm text-primary font-semibold mb-2">{{ project.rolle }}</p>
                            {% endif %}
                            <p class="text-gray-600 text-sm mb-3">{{ project.shortDescription }}</p>
                            <div class="flex flex-wrap gap-2 mb-2">
                                {% if project.technologien %}
                                <span class="px-3 py-1 bg-primary/10 text-primary rounded-full text-xs font-semibold">{{
                                    project.technologien }}</span>
                                {% endif %}
                                {% if project.von and project.bis %}
                                <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs">{{ project.von }}
                                    - {{ project.bis }}</span>
                                {% endif %}
                            </div>
                        </div>
                        <div class="flex gap-2 flex-shrink-0">
                            <button type="button"
                                @click="editingPortfolioId = {{ loop.index0 }}; showPortfolioForm = false; $nextTick(() => { document.getElementById('edit-portfolio-{{ loop.index0 }}').scrollIntoView({ behavior: 'smooth', block: 'center' }); })"
                                class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all" title="Bearbeiten">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                </svg>
                            </button>
                            <form method="POST"
                                action="{{ url_for('admin.delete_portfolio_project', project_id=loop.index0) }}"
                                onsubmit="return confirm('M√∂chten Sie dieses Projekt wirklich l√∂schen?')">
                                <button type="submit" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all"
                                    title="L√∂schen">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                {% endfor %}
                {% else %}
                <div class="text-center py-12 bg-gray-50 rounded-xl">
                    <p class="text-gray-500">Noch keine Portfolio-Projekte vorhanden.</p>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- GitHub Projects Tab -->
        <div x-show="activeProjectTab === 'github'" class="p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800">GitHub-Projekte</h3>
                <div class="flex gap-2">
                    <!-- Import Button -->
                    <label for="import-github"
                        class="cursor-pointer px-4 py-2 bg-gradient-to-r from-success to-green-500 text-white rounded-lg hover:shadow-lg transition-all font-semibold flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                        </svg>
                        Importieren
                    </label>
                    <form id="import-github-form" method="POST" action="{{ url_for('admin.import_github_projects') }}"
                        enctype="multipart/form-data" style="display: none;">
                        <input type="file" id="import-github" name="file" accept=".json" onchange="this.form.submit()">
                    </form>
                    <!-- Add Button -->
                    <button @click="showGithubForm = !showGithubForm; editingGithubId = null"
                        class="px-4 py-2 bg-gradient-to-r from-accent to-orange-500 text-white rounded-lg hover:shadow-lg transition-all font-semibold flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                        </svg>
                        Projekt hinzuf√ºgen
                    </button>
                </div>
            </div>

            <!-- Add GitHub Project Form -->
            <div x-show="showGithubForm && editingGithubId === null"
                class="bg-gradient-to-r from-accent/5 to-orange-50 rounded-xl p-6 border-l-4 border-accent mb-6">
                <h4 class="text-lg font-bold text-gray-800 mb-4">Neues GitHub-Projekt hinzuf√ºgen</h4>
                <form method="POST" action="{{ url_for('admin.add_github_project') }}">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Titel *</label>
                            <input type="text" name="title" required
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Technologien</label>
                            <input type="text" name="technologien" placeholder="Python, Flask"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Kurzbeschreibung *</label>
                        <textarea name="shortDescription" required rows="2"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"></textarea>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Beschreibung *</label>
                        <textarea name="description" required rows="4"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"></textarea>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">GitHub Link *</label>
                            <input type="url" name="link" required placeholder="https://github.com/..."
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Logo Pfad</label>
                            <input type="text" name="logo" placeholder="./static/images/logo.svg"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" name="wip" value="true"
                                class="w-4 h-4 text-accent border-gray-300 rounded focus:ring-accent">
                            <span class="text-sm font-semibold text-gray-700">Work in Progress (WIP)</span>
                        </label>
                    </div>

                    <div class="flex gap-3">
                        <button type="submit"
                            class="px-6 py-3 bg-gradient-to-r from-accent to-orange-500 text-white rounded-lg hover:shadow-lg transition-all font-semibold">
                            Hinzuf√ºgen
                        </button>
                        <button type="button" @click="showGithubForm = false"
                            class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-all font-semibold">
                            Abbrechen
                        </button>
                    </div>
                </form>
            </div>

            <!-- GitHub Projects List -->
            <div class="space-y-4">
                {% if github_projects %}
                {% for project in github_projects %}
                <!-- Edit Form f√ºr dieses GitHub-Projekt -->
                <div x-show="editingGithubId === {{ loop.index0 }}" id="edit-github-{{ loop.index0 }}"
                    class="bg-gradient-to-r from-accent/5 to-orange-50 rounded-xl p-6 border-l-4 border-accent mb-6">
                    <h4 class="text-lg font-bold text-gray-800 mb-4">Projekt bearbeiten</h4>
                    <form method="POST" action="{{ url_for('admin.edit_github_project', project_id=loop.index0) }}">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Titel *</label>
                                <input type="text" name="title" required value="{{ project.title }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Technologien</label>
                                <input type="text" name="technologien" placeholder="Python, Flask"
                                    value="{{ project.technologien or '' }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Kurzbeschreibung *</label>
                            <textarea name="shortDescription" required rows="2"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">{{ project.shortDescription }}</textarea>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Beschreibung *</label>
                            <textarea name="description" required rows="4"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">{{ project.description }}</textarea>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">GitHub Link *</label>
                                <input type="url" name="link" required placeholder="https://github.com/..."
                                    value="{{ project.link }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Logo Pfad</label>
                                <input type="text" name="logo" placeholder="./static/images/logo.svg"
                                    value="{{ project.logo or '' }}"
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent">
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="flex items-center gap-2">
                                <input type="checkbox" name="wip" value="true" {% if project.wip %}checked{% endif %}
                                    class="w-4 h-4 text-accent border-gray-300 rounded focus:ring-accent">
                                <span class="text-sm font-semibold text-gray-700">Work in Progress (WIP)</span>
                            </label>
                        </div>

                        <div class="flex gap-3">
                            <button type="submit"
                                class="px-6 py-3 bg-gradient-to-r from-accent to-orange-500 text-white rounded-lg hover:shadow-lg transition-all font-semibold">
                                Speichern
                            </button>
                            <button type="button" @click="editingGithubId = null"
                                class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-all font-semibold">
                                Abbrechen
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Projekt-Vorschau -->
                <div x-show="editingGithubId !== {{ loop.index0 }}"
                    class="bg-white border-2 border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all">
                    <div class="flex justify-between items-start gap-4">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <h4 class="text-lg font-bold text-gray-800">{{ project.title }}</h4>
                                {% if project.wip %}
                                <span
                                    class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-semibold">WIP</span>
                                {% endif %}
                            </div>
                            <p class="text-gray-600 text-sm mb-3">{{ project.shortDescription }}</p>
                            <div class="flex flex-wrap gap-2">
                                {% if project.technologien %}
                                <span class="px-3 py-1 bg-accent/10 text-accent rounded-full text-xs font-semibold">{{
                                    project.technologien }}</span>
                                {% endif %}
                                {% if project.link %}
                                <a href="{{ project.link }}" target="_blank"
                                    class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs hover:bg-gray-200 transition-all">
                                    üîó Repository
                                </a>
                                {% endif %}
                            </div>
                        </div>
                        <div class="flex gap-2 flex-shrink-0">
                            <button type="button"
                                @click="editingGithubId = {{ loop.index0 }}; showGithubForm = false; $nextTick(() => { document.getElementById('edit-github-{{ loop.index0 }}').scrollIntoView({ behavior: 'smooth', block: 'center' }); })"
                                class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all" title="Bearbeiten">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                </svg>
                            </button>
                            <form method="POST"
                                action="{{ url_for('admin.delete_github_project', project_id=loop.index0) }}"
                                onsubmit="return confirm('M√∂chten Sie dieses Projekt wirklich l√∂schen?')">
                                <button type="submit" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all"
                                    title="L√∂schen">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                {% endfor %}
                {% else %}
                <div class="text-center py-12 bg-gray-50 rounded-xl">
                    <p class="text-gray-500">Noch keine GitHub-Projekte vorhanden.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>