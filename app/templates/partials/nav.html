{% import "components/navbar_components.html" as navbar %}

<!-- Navbar -->
<nav id="nav"
    class="bg-gradient-to-r from-white via-white to-primary/5 border-b-4 border-primary w-full top-0 z-50 shadow-lg backdrop-blur-md"
    x-data="{ mobileOpen: false }">
    <div class="w-full px-6 flex items-center justify-between h-20">
        <!-- Linke Seite: Logo mit modernem Stil -->
        <a href="{% if request.endpoint == 'main.index' %}#{% else %}{{ url_for('main.index', _anchor='') }}{% endif %}"
            class="flex items-center space-x-3 group">
            <div class="relative">
                <!-- Abstraktes geometrisches Logo (Microsoft-inspiriert, aber einzigartig) -->
                <div
                    class="grid grid-cols-2 gap-1.5 w-10 h-10 transform group-hover:rotate-180 transition-transform duration-500">
                    <div class="bg-gradient-to-br from-accent to-orange-400 rounded"></div>
                    <div class="bg-gradient-to-br from-success to-green-400 rounded"></div>
                    <div class="bg-gradient-to-br from-warning to-yellow-400 rounded"></div>
                    <div class="bg-gradient-to-br from-primary to-blue-400 rounded"></div>
                </div>
            </div>
            <span class="text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">{{
                contact.get_full_name()}}</span>
        </a>

        <!-- Desktop Navigation (ab 1024px) -->
        <div class="hidden lg:flex flex-1 items-center justify-center space-x-2">
            <!-- Navigationslinks -->
            {{ navbar.nav_link() }}
        </div>

        <!-- Desktop User Dropdown (ab 1024px) -->
        <div class="hidden lg:block">
            {{ navbar.user_dropdown(current_user) }}
        </div>

        <!-- Mobile/Tablet Navigation (unter 1024px) -->
        <div class="flex lg:hidden items-center space-x-4">
            {{ navbar.user_dropdown(current_user) }}
            <!-- Mobile Menu Button -->
            <button @click="mobileOpen = !mobileOpen" id="mobile-menu-button"
                class="p-2 rounded-lg bg-primary/10 text-primary hover:bg-primary hover:text-white transition-all focus:outline-none focus:ring-2 focus:ring-primary">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6h16M4 12h16M4 18h16">
                    </path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Mobile/Tablet Dropdown for Navigation Links -->
    <div id="mobile-menu"
        class="lg:hidden bg-white shadow-2xl absolute top-20 left-0 w-full z-50 border-t-2 border-primary/20"
        x-show="mobileOpen" x-cloak @click.away="mobileOpen = false"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 transform -translate-y-2"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0">
        <div class="px-4 pt-4 pb-4 space-y-1">
            {{ navbar.mobile_nav_link() }}
        </div>
    </div>
</nav>